<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ポートフォリオ</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Raleway:300"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Lusitana:400,700"
      rel="stylesheet"
    />

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link rel="stylesheet" href="./assets/css/form.css" />
    <link rel="stylesheet" href="./assets/css/style.css" />
  </head>
  <body>
    <header id="header">
      <div id="nav-icon">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <nav id="nav">
        <ul id="nav-list">
          <li><a href="#home">ホーム</a></li>
          <li><a href="#concept">コンセプト</a></li>
          <li><a href="#service">サービス内容</a></li>
          <li><a href="#contact">お問い合わせ</a></li>
        </ul>
      </nav>
    </header>

    <section id="home"><h1>Takanami Holdings</h1></section>
    <section id="concept" style="background-color: blue">
      <h2 data-aos="flip-left">
        私たちはお客様に寄り添って、<br />最大のサービスを提供します。
      </h2>
    </section>
    <section id="service" style="background-color: pink">
      <h2 id="service-title">サービス</h2>
      <div id="news"></div>
      <script>
        const endpointUrl = "https://40dai.microcms.io/api/v1/blogs";
        const apiKey = "380d77109da94e0982b4abb848d2998f4065";

        async function displayContent() {
          try {
            const response = await fetch(endpointUrl, {
              headers: {
                "X-API-KEY": apiKey,
              },
            });
            const data = await response.json();

            const newsContainer = document.getElementById("news");
            data.contents.forEach((item) => {
              const newsItem = document.createElement("div");
              newsItem.textContent = item.title; // 表示するデータのプロパティに応じて修正してください
              newsItem.id = "newses";
              newsContainer.appendChild(newsItem);
            });
          } catch (error) {
            console.error(error);
          }
        }

        window.addEventListener("load", displayContent);
      </script>
    </section>
    <section id="contact" style="background-color: #fff">
      <div data-aos="fade-up-right">
        <h2 id="contact-form">お問い合わせフォーム</h2>
        <form class="contact-form row" action=".\form\email.php" method="post">
          <input
            type="hidden"
            name="csrf_token"
            value="<?php echo $_SESSION['csrf_token']; ?>"
          />
          <div class="form-field col x-50">
            <input id="name" class="input-text js-input" type="text" required />
            <label class="label" for="name">Name</label>
          </div>
          <div class="form-field col x-50">
            <input
              id="email"
              class="input-text js-input"
              type="email"
              required
            />
            <label class="label" for="email">E-mail</label>
          </div>
          <div class="form-field col x-100">
            <input
              id="message"
              class="input-text js-input"
              type="text"
              required
            />
            <label class="label" for="message">Message</label>
          </div>
          <div>
            <input class="submit-btn" type="submit" value="送信する" />
          </div>

          <?php if (isset($_SESSION['feedback'])): ?>
          <p><?= $_SESSION['feedback']; ?></p>
          <?php unset($_SESSION['feedback']); ?>
          <?php endif; ?>
        </form>
      </div>
    </section>

    <script src="./assets/js/menu.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script>
      const inputElement = document.querySelector(".js-input");
      inputElement.addEventListener("keyup", function () {
        if (this.value) {
          this.classList.add("not-empty");
        } else {
          this.classList.remove("not-empty");
        }
      });
    </script>
    <script src="https://unpkg.com/microcms-js-sdk@latest/dist/umd/microcms-js-sdk.js"></script>
  </body>
</html>
